# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a master thesis research project focused on "AI Agents in Finance" with emphasis on Retrieval-Augmented Generation (RAG) systems and multi-agent architectures in banking. The project follows strict academic standards (Q1 journals, impact factor 3.0+, 2020-2025 publications).

## Memory System Integration

This project includes a persistent memory system that maintains context across sessions. The memory system stores:

- **Project Context**: Current phase, completed chapters, deadlines, progress
- **Active Rules**: Writing standards, technical requirements, quality criteria
- **Session History**: All actions and changes made
- **Important Notes**: Key decisions and reminders

### Key Memory Commands

- `get_context` - Shows current project state and progress
- `add_note` - Adds important notes to memory
- `memory_checkpoint` - Creates/restores project snapshots
- `update_progress` - Updates completion status

## Essential Commands

### Initial Setup
```bash
cd scripts
./setup_research.sh
```

### Virtual Environment
```bash
source venv/bin/activate  # ALWAYS activate before any Python command
```

### Core Research Commands
```bash
python scripts/search_literature.py      # Search academic databases
python scripts/manage_references.py      # Manage bibliography
python scripts/research_assistant.py outline    # Generate thesis outline
python scripts/research_assistant.py template --chapter "Introduction" --section "Problemstellung"
python scripts/research_assistant.py progress   # Check deadlines and progress
python scripts/research_assistant.py summary    # Export research summary
```

### Code Quality
```bash
black scripts/*.py  # Format Python code
```

## Architecture Overview

The codebase implements a research automation framework with three core components:

1. **Literature Search System** (`scripts/search_literature.py`)
   - Integrates with academic databases (Scopus, Web of Science) via optional API keys
   - Filters results based on quality criteria in `config/research-criteria.yaml`
   - Outputs to `research/search-results/` and `research/validated-literature.json`

2. **Reference Management** (`scripts/manage_references.py`)
   - Processes validated literature from JSON files
   - Integrates with Citavi for bibliography management
   - Maintains curated sources in `research/q1-sources/`

3. **Research Assistant** (`scripts/research_assistant.py`)
   - Reads configuration from `config/` directory (YAML/JSON files)
   - Generates thesis templates in `writing/templates/`
   - Tracks progress against MBA standards defined in `config/mba-standards.json`

4. **Memory System** (`memory_system.py`)
   - Maintains persistent context in `.claude_memory/`
   - Tracks all changes and progress
   - Enforces project rules and standards

## Key Configuration Files

- `config/research-criteria.yaml`: Journal quality thresholds, publication date ranges
- `config/writing-style.yaml`: Academic writing guidelines specific to German MBA programs
- `config/mba-standards.json`: Program requirements, deadlines, formatting rules
- `config/api_keys.yaml`: Optional API credentials (not in version control)
- `.claude_memory/context.json`: Current project state and progress
- `.claude_memory/rules.yaml`: Active rules and standards

## Important Rules (From Memory System)

### Writing Rules
1. Use consistent academic writing style in German
2. Cite ALL statements with sources
3. Use only Q1 journals (Impact Factor > 3.0)
4. Write in German, technical terms in English
5. Structure each section: Introduction → Main part → Summary
6. Avoid first person, use passive constructions
7. Define technical terms on first use

### Technical Rules
1. ALWAYS activate the virtual environment before Python commands
2. Run tests after changes
3. Create daily backups
4. Document all code changes
5. Use Git for versioning

### Content Rules
1. Focus on SAP BTP and financial sector
2. RAG systems as core topic
3. Highlight multi-agent architectures
4. Practical examples from German banks
5. Consider regulatory aspects (BaFin, GDPR)

## Important Deadlines

- Proposal: February 15, 2025
- First Draft: April 30, 2025
- Final Submission: June 30, 2025
- Defense: July 15, 2025

## Dependencies

All Python dependencies are specified in `requirements.txt` (generated by setup script). Key packages include:
- Research: scholarly, pybtex, pyyaml
- NLP: spacy (with de_core_news_sm model), transformers, nltk
- Data analysis: pandas, numpy, matplotlib
- Document processing: python-docx, PyPDF2

## MCP Server Integration

This project functions as an MCP (Model Context Protocol) server. Available tools:
- `search_literature` - Search academic databases
- `manage_references` - Handle citations with Citavi integration
- `create_writing_template` - Generate structured writing templates
- `check_progress` - Monitor progress and deadlines
- `generate_outline` - Create thesis structure
- `generate_summary` - Summarize research status
- `backup_project` - Create project backups
- `memory_checkpoint` - Save/restore project state
- `add_note` - Add important notes to memory
- `get_context` - Show current context and rules
- `update_progress` - Update completion status
- `verify_citations` - Verify sources and generate correct citations with quality control

## SuperClaude Integration & MCP Usage Rules

### MANDATORY: Always Use MCP Server Tools

When working on this project, you MUST:

1. **ALWAYS start sessions with:**
   ```bash
   /load
   get_context
   ```

2. **For ANY research task, use MCP tools:**
   - Literature search → Use `search_literature` MCP tool
   - Reference management → Use `manage_references` MCP tool
   - Writing templates → Use `create_writing_template` MCP tool
   - Progress tracking → Use `check_progress` MCP tool
   - Citation verification → Use `verify_citations` MCP tool

3. **SuperClaude Commands with MCP Flags:**
   ```bash
   # Research Analysis (ALWAYS use these flags)
   /analyze --code --seq --c7 --persona-architect
   
   # Literature Research
   /analyze --c7 --persona-mentor
   /explain --c7 --depth expert
   
   # Architecture Design
   /design --api --seq --ultrathink --persona-architect
   
   # Quality Assurance
   /review --quality --evidence --seq --persona-qa
   
   # Documentation
   /document --thesis --c7 --persona-mentor
   ```

4. **Automatic MCP Activation Rules:**
   - Python imports → MUST activate Context7 (`--c7`)
   - Complex analysis → MUST activate Sequential (`--seq`)
   - Research tasks → MUST use project MCP tools
   - Architecture design → MUST use Sequential (`--seq`)

5. **Memory System Integration:**
   - Before ANY major action: `memory_checkpoint create <description>`
   - After completions: `update_progress`
   - For important findings: `add_note "<finding>"`
   - Regular checks: `get_context` (minimum every 10 commands)

6. **Workflow Priority:**
   ```
   1. MCP Tools (search_literature, etc.) for project-specific tasks
   2. SuperClaude Commands with appropriate flags
   3. Memory System for persistence
   4. Standard tools only as fallback
   ```

### Project-Specific MCP Patterns

- **Literature Search Pattern:**
  ```bash
  search_literature → verify_citations → manage_references → add_note
  ```

- **Writing Pattern:**
  ```bash
  get_context → create_writing_template → /document --c7 → update_progress
  ```

- **Analysis Pattern:**
  ```bash
  /analyze --seq --c7 → search_literature → /explain --c7 → add_note
  ```

### CRITICAL: Never Skip MCP Tools

- DO NOT use generic web search when `search_literature` is available
- DO NOT manually format citations when `verify_citations` exists
- DO NOT track progress manually when `check_progress` and `update_progress` exist
- DO NOT create templates from scratch when `create_writing_template` exists

These rules ensure consistent, high-quality research output aligned with academic standards.

## Notes

- The project is not yet initialized as a git repository (setup script will handle this)
- Virtual environment must be activated before running any Python scripts
- API keys for academic databases are optional but recommended for comprehensive searches
- Output files go to `output/` directory (thesis.docx, bibliography.txt)
- Memory system maintains all context - check with `get_context` regularly
- Create checkpoints before major changes with `memory_checkpoint create <name>`